{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "T001: poetry install --no-root",
      "type":"shell",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "command": "poetry install --no-root"
    },
    {
      "label": "T002: requirements.txtへ出力",
      "type":"shell",
      "command": "poetry export -f requirements.txt -o ${workspaceFolder}/requirements.txt --without-hashes"
    },
    {
      "label": "T010: デバッグモードでコンテナ起動",
      "type":"shell",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "command": "docker compose -f docker-compose.debug.yml build  && docker compose -f docker-compose.debug.yml up"
    },
    {
      "label": "T011: デバッグモードのコンテナ停止",
      "type":"shell",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "command": "docker compose -f docker-compose.debug.yml down # 省略→ --rmi local"
    },
    {
      "label": "TS12: デバッグ中のappサービスのシェルを開く",
      "type": "shell",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "command": "docker compose -f docker-compose.debug.yml exec -it app sh"
    },
    {
      "label": "T021: デバッグモードでローカル起動",
      "type":"shell",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "command": "${workspaceFolder}/.venv/bin/python3 -m debugpy --listen localhost:8001 -m uvicorn --host=localhost --port=8000 main:app --reload"
    }
  ]
}
